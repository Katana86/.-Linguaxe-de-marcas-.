<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<title>Step 5: Create a Shared Library</title>
<script language="JavaScript">
<!-- hide
function openWin(term) {
  url="../../information/glossary.html#" + term;
  myWin= window.open(url, "Glossary",
              "width=400,height=150,scrollbars=yes,status=no,toolbar=no,menubar=no");
  myWin.focus();
}
//-->
</script>
</head>
<body BGCOLOR="#ffffff" LINK="#000099">
<B><FONT SIZE="-1">The Java</font><sup><font size="-2">TM</font></sup> <font size="-1">Tutorial</FONT></B>
<br>
<table width="550">
<tr>
<td align="left" valign="center">
<a href="step4.html" target="_top"><img src="../../images/PreviousArrow.gif" width="26" height="26" align="center" border="0" alt="Previous Page"></a>
<a href="../TOC.html#stepbystep" target="_top"><img src="../../images/TOCIcon.gif" width="26" height="26" align="center" border="0" alt="Lesson Contents"></a>
<a href="step6.html" target="_top"><img src="../../images/NextArrow.gif" width="26" height="26" align="center" border="0" alt="Next Page"></a></td>

<td align="center" valign="center">
<font size="-1">
<a href="../../index.html" target="_top">Start of Tutorial</a>
&gt;
<a href="../index.html" target="_top">Start of Trail</a>
&gt;
<a href="index.html" target="_top">Start of Lesson</a>
</font>
</td>

<td align="right" valign="center">
<font size="-1">
<a href="../../search.html" target="_top">Search</a>
<br><a href="../../forms/sendusmail.html">Feedback Form</a>
</font>
</td>

</tr>
</table>
<img src="../../images/blueline.gif" width="550" height="8" ALIGN="BOTTOM" NATURALSIZEFLAG="3">
<br>

<font size="-1">
<b>Trail</b>: Java Native Interface
<br>
<b>Lesson</b>: Writing a Java Program with Native Methods
</font>

<h2>
Step 5: Create a Shared Library
</h2>
<blockquote>
Remember in <a href=step1.html>Step 1: Write the Java Code</a> you
used the following method call to load a shared library named
<code>hello</code> into your program at runtime:

<blockquote><pre>
System.loadLibrary("hello");
</pre></blockquote>

Now you are ready to create this shared library.

<p> In the previous step, <a href="step4.html"> Step 4: Write the
Native Method Implementation</a>, you created a C file in which you wrote the implementation for the <code>displayHelloWorld</code>
native method.  You saved the native method in the file <code>HelloWorldImp.c</code>. Now, you
must compile <code>HelloWorldImp.c</code> into a shared library, which you name <code>hello</code> to
match the library name used in the <code>System.loadLibrary</code>
method.

<!-- appendix: put the text from _library.html link in the appendix -->
<p> Compile the native language code
that you created in the previous two steps into a shared library.  On
Solaris, you'll create a shared library, while on Windows 95/NT you'll
create a dynamic link library (DLL).  Remember to specify the path or
paths to all necessary header files. See <a href=_library.html>Creating and Loading Shared Libraries</a> for information on forming a shared library name.

<p> On Solaris, the following command builds a shared library
<code>libhello.so</code>:

<blockquote><pre>
cc -G -I/usr/local/java/include -I/usr/local/java/include/solaris \
      HelloWorldImp.c -o libhello.so
</pre></blockquote>

<p>
On Win32, the following command builds a dynamic link library 
<code>hello.dll</code> using Microsoft Visual C++ 4.0:

<blockquote><pre>
cl -Ic:\java\include -Ic:\java\include\win32
      -LD HelloWorldImp.c -Fehello.dll
</pre></blockquote>

Of course, you need to specify the <code>include</code> path that
corresponds to the setup on your own machine.
<p>

<!-- appendix: the next reference to _library.html link is the same text that
     went into the appendix from above. -->
For more information on the system-dependent mechanisms for loading a shared library, see <a href=_library.html>Creating and Loading Shared Libraries</a>. 

</blockquote>

<img src="../../images/blueline.gif" width="550" height="8" ALIGN="BOTTOM" NATURALSIZEFLAG="3">
<br>
<table width="550">
<tr>
<td align="left" valign="center">
<a href="step4.html" target="_top"><img src="../../images/PreviousArrow.gif" width="26" height="26" align="center" border="0" alt="Previous Page"></a>
<a href="../TOC.html#stepbystep" target="_top"><img src="../../images/TOCIcon.gif" width="26" height="26" align="center" border="0" alt="Lesson Contents"></a>
<a href="step6.html" target="_top"><img src="../../images/NextArrow.gif" width="26" height="26" align="center" border="0" alt="Next Page"></a></td>

<td align="center" valign="center">
<font size="-1">
<a href="../../index.html" target="_top">Start of Tutorial</a>
&gt;
<a href="../index.html" target="_top">Start of Trail</a>
&gt;
<a href="index.html" target="_top">Start of Lesson</a>
</font>
</td>

<td align="right" valign="center">
<font size="-1">
<a href="../../search.html" target="_top">Search</a>
<br><a href="../../forms/sendusmail.html">Feedback Form</a>
</font>
</td>

</tr>
</table>
</body>
</html>
